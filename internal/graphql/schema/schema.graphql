# Root types
schema {
  query: Query
}

type Query {
  # System information
  health: SystemHealth!

  # KV Store queries
  kv(key: String!): KVPair
  kvList(prefix: String, limit: Int, offset: Int): KVListResponse!

  # Service Discovery queries
  service(name: String!): Service
  services(limit: Int, offset: Int): [Service!]!
  servicesCount: Int!

  # Service queries by tags and metadata
  servicesByTags(tags: [String!]!): [Service!]!
  servicesByMetadata(filters: [MetadataFilter!]!): [Service!]!
  servicesByQuery(tags: [String!], metadata: [MetadataFilter!]): [Service!]!
}

"""
Metadata filter for querying services by metadata
"""
input MetadataFilter {
  """Metadata key"""
  key: String!

  """Metadata value"""
  value: String!
}
