"""
Service represents a registered service in the service registry
"""
type Service {
  """Service name (unique identifier)"""
  name: String!

  """Service IP address or hostname"""
  address: String!

  """Service port number"""
  port: Int!

  """Service status"""
  status: ServiceStatus!

  """Expiration timestamp"""
  expiresAt: Time!

  """Service tags for filtering and categorization"""
  tags: [String!]!

  """Service metadata (key-value pairs)"""
  metadata: [MetadataEntry!]!

  """Health checks associated with this service"""
  checks: [HealthCheck!]!
}

"""
Metadata key-value pair
"""
type MetadataEntry {
  """Metadata key"""
  key: String!

  """Metadata value"""
  value: String!
}

"""
Service status enum
"""
enum ServiceStatus {
  """Service is active and not expired"""
  ACTIVE

  """Service has expired"""
  EXPIRED
}

"""
Health check definition
"""
type HealthCheck {
  """Check ID"""
  id: String!

  """Service ID this check belongs to"""
  serviceId: String!

  """Check name"""
  name: String!

  """Check type (http, tcp, grpc, ttl)"""
  type: HealthCheckType!

  """Current status"""
  status: HealthCheckStatus!

  """Status output/message"""
  output: String

  """Check interval"""
  interval: Duration

  """Check timeout"""
  timeout: Duration

  """Last check time"""
  lastChecked: Time
}

"""
Health check type
"""
enum HealthCheckType {
  HTTP
  TCP
  GRPC
  TTL
}

"""
Health check status
"""
enum HealthCheckStatus {
  PASSING
  WARNING
  CRITICAL
}

"""
Input type for registering a service
"""
input RegisterServiceInput {
  """Service name (unique identifier)"""
  name: String!

  """Service IP address or hostname"""
  address: String!

  """Service port number"""
  port: Int!

  """Service tags (optional)"""
  tags: [String!]

  """Service metadata as key-value pairs (optional)"""
  metadata: [MetadataInput!]
}

"""
Input type for metadata
"""
input MetadataInput {
  """Metadata key"""
  key: String!

  """Metadata value"""
  value: String!
}

"""
Service change event for subscriptions
"""
type ServiceChangeEvent {
  """Event type: registered, deregister, heartbeat"""
  type: ServiceEventType!

  """The service that changed"""
  service: Service!

  """Timestamp of the change"""
  timestamp: Time!
}

"""
Service event types
"""
enum ServiceEventType {
  """Service was registered"""
  REGISTERED

  """Service was deregistered"""
  DEREGISTERED

  """Service heartbeat updated"""
  HEARTBEAT
}
